<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>

  <input type="text" id="clock" size="35" />
  <br>
  <p id="Tits"></p>
  <br>
  <button onclick="int=window.clearInterval(int)">
    Stop interval</button>

  <script>
    var int = self.setInterval("clock()", 50);
    // var ajaxStart=self.setInterval("ajax()",1000);
    var inputCheckStart = self.setInterval("inputCheck()", 3000);

    // function clock() {
    //   var t = new Date().toLocaleString();
    //   document.getElementById("clock").value = t
    // }

    function ajax() {
      var request = new XMLHttpRequest();
      request.onreadystatechange = function () {
        if (request.readyState == 4 || request.status == 200) {
          var str = request.responseText;
          // console.log(str);
          // console.log(str.length);
          //    for( var i=0;i<str.length;i++){
          //         console.log(str[i]);
          // }
          var getinputTxt = document.getElementById("clock").value;

          if (str.indexOf(getinputTxt) != -1) {
            clearInterval(inputCheckStart);
            document.getElementById("Tits").innerHTML =
              "<font style='color:green'>匹配成功！</font>"
            console.log("key::" + str);

          } else {
            document.getElementById("Tits").innerHTML =
              "匹配失败！请重试！"
            console.log(">>>>>>>>>>>>>>>")
          }

          //  console.log("input:::"+getinputTxt);
          //    console.log("store::"+str);

        }
      }


      request.open("GET", "/projectA/phoneNumList.txt", "true"); //Failed to load resource: 未找到本地资源
      // the server responded with a status of 404 (Not Found)
      request.send();

    }

    function inputCheck() {
      var text = document.getElementById("clock").value;
      if (isNaN(text) || text == "") {
        document.getElementById("Tits").innerHTML =
          "<font style='color:red'>请输入11位纯数字！</font>";
      } else {
        document.getElementById("Tits").innerHTML =
          "<font style='color:green'>格式正确！请继续输入</font>"
        //    document.getElementById("Tits").style.color="bule"; 失败了
        if (text.length == 11) {

          ajax();

        } else if (text.length > 11) {
          document.getElementById("Tits").innerHTML =
            "输入了一个不正确的号码，请重试！"
        }
      }
    }
  </script>


</body>

</html>